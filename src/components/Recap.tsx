"use client";

import React from "react";
import {
  Clock,
  Headset,
  AlarmClockCheck,
  Trash2,
  User,
  ListChecks,
  AudioLines,
  Heart,
} from "lucide-react";
import AudioPlayer from "./AudioPlayer";

const CallLogDashboard = () => {
  const callLogs = [
    {
      id: 3,
      callId: "6526741045526528",
      email: "danicha.abenoja@haulla.com",
      startAt: "2024-11-27T20:49:20.368Z",
      externalNumber: "+19193649387",
      contactName: "Dani",
      contactEmail: "",
      contactPhone: "",
      followUpDate: "1 week",
      currentProvider: "Unknown",
      dumpsterSize: "6 yard",
      serviceFrequency: "twice a week",
      sentiment: "neutral",
      summary:
        "Bobby is seeking a new trash service contract due to dissatisfaction with his current provider's recent price increase and poor business practices. He requests quotes for a six-yard container with twice-weekly pickups and an eight-yard container with weekly pickups, aiming to finalize his decision before mid-December before a medical procedure.",
      actionItem: [
        "send email with quotes for 6-yard twice a week and 8-yard once a week",
        "follow up with the customer in one week",
      ],
      text: "Hello, this is Bobby. Oh, hi. Good afternoon. This is Dani from Howla Way Services. How are you? Doing well. Awesome. So, yeah, I get your message. You requested a call back at this time. Mm-hmm. pay for the termination fees and give you a cheaper rate. However, we may need a copy of your most recent invoice. Do you have it with you right now? I do have it with me right now, but here's what I will suggest. My contract was just renewed. The long story short is that after they had the price, whatever, 26%, I got back on them. They got a lot of callbacks, and ultimately they sent me an agreement that they said will be for a better price and despite my better judgment I was in a hospital long story short I share a responsibility for that actually at the end of it signed it and so the new invoice came and it turns out it's not for better it's for a whole lot worse condition so what I would suggest is this first of all I have a brand new contract I I mean, literally like three weeks ago. And that's not going to be a good time to get out of it, of course. But it should not have been executed or signed in the first place because it's for worse terms than what it was. And because they're Yeah. just because of the way they're handling all this. I would suggest, because I think that's going to be easier for you, I already sent them a message. I don't really expect any miracles because I've seen how they work. They don't do anything in writing, meaning whatever they promise me over the phone, they will never send in writing. They only want to talk over the phone. There's no promises that they made in email exchanges. So it's going to be tough. But, and it's not the end of the world. I don't do it for the money. I will pass the money to my tenants, the increase, and it's not going to kill them. It's not the end. It's just not the way to do business right. So what I'm proposing, and I think it's going to be, I don't know, you know this business better than I do, of course, but I suggest give me like a week and let's see whether I will just get them to get out of this contract. I will still switch, you know, if I get a better deal, of course. I mean, there's no point otherwise because service-wise, there's no problem. They're coming and picking up eventually once or twice. They may be late one day and that's all right. Things happen all the time, so no worries about it. But service-wise, there are no problems. Money and business attitude-wise, it is bad. You let me know. Let me know. If you can quote me, because I think that is the right thing to do. I told you what the conditions that I'm using are. Twice a week, six cubic feet, six cubic feet container that is currently twice a week. It never gets full. But in the summer, because of the food inside, and there's just one restaurant place. The rest of the businesses don't generate any trash whatsoever. The retail stores and things. So can you get me a quote for what you would say? Forget about the buying, because I'm working on that. Can you just work out and tell me what it would rent me if I was just a new client and you did not have to buy me out? That's what I'm going to be working on. Just send me a quote so I can compare apples to apples. Tell me the length of the agreement. Just send me a simple agreement so I will read carefully. On my end, for this to happen, I'm just giving you a time frame, I am looking for, if I do a switch, it will happen before December, let's say, 16, 16, somewhere mid-December. Because after that, I will be... I signed their agreement from inside a hospital. You know, the quote for the agreement was going out, and I did not go through all the fine details like I usually and normally do and that was my fault and I blame myself for doing it that way. But anyhow, I'm going to be back in a hospital in mid-December for an operation and between December and January I will not be dealing with anything that can be having any stress. So I need to settle this just to tell you what my timeframe, I may do nothing. I may switch. We have to finalize it on my end, whatever it is, by December 15 and after that, I will only be able to look at it after January. Okay. Well, we can definitely do that. But in order for me to provide an accurate quote, can I have the service address yes two zero zero nine West you just you just write W usually he brought h e B are o and he brought H-E-B-R-O-N, Hebron. H-E-B-R-O-N, Parkway. In Carrollton, and that's spelled with double L and double T, 75010. Thank you. And what's your company name? The company name is Beaks, and that is spelled weird. B as in boy, E is in Edwards, I is in Ivanhoe, K is in King, and S is in Sam. Beaks, L-L-T. And I'm the company owner, and I've been here for, I don't know, 15 plus years. Okay, perfect. Thank you. Let me just get the price real quick here. So you said six yard twice a week pickup, or you can also do eight yard and six yard with one pickup, right? To be able to compare apples to apples, it will be best if you just do six, but if you can send another one that is eight a week. The problem with eight a week is that in the summer, I mean, volume-wise, it's going to be fine. But in the summer, they throw out food and, you know, with the high temperatures, it just melts a lot. So I don't know which one will be better. But if you can send both, then that will be best if not just twice six cubic feet because that's what we're spending that they don't they don't fill it up it it it never is pulled near the top at six feet twice a week even, I just don't want to max it out because that's another set of problem, right? Because if you max it out, you charge for over blah, blah. Yeah, I don't want to get that. They will pay. So let's go with six twice or eight once. Okay. And does your dumpster have a lock, like a lock bar on top? I'm not sure what you mean. The dumpster that is currently out there is slanted, double door. There is no lock. It is in a gated area. So whoever comes in usually has to get out, open the doors and service it. And they usually leave the doors open. Sometimes we leave them open for them. Sometimes we open the doors when we see the truck arriving so they don't have to get out. But truck drivers told me that they actually like to get out because it's exercise for them. That's what I heard. But there are no locks. It is gated. The gates are functioning. And one day they will break because they leave them open so if it's windy sometimes the doors break when they don't return them. But no, there are no locks that if I understand the question correctly. Yeah, yeah. All right. Perfect. Thank you. So our price for a six-year container with twice a week pickup is around $299.29 per month. That's all taxes included. Is this more than what you're paying now? Off the top of my head, it is definitely more than what they did now. I'm sorry, it is less, but not by much, than what they are charging me right now. It's not close enough, probably, to justify just money-wise. Theirs is higher. After the hike that they just did with this last instance, it is higher. Because I think just because I'm not in front of a computer right now, I told you that it's safe to call. If you can please just email me that, and I will get back to you as soon as I look at it again. And then if the aid container once a week is going to be cheaper, send me that as well. Okay. All right. I'll include that on the email. And I will get back to you before the end of the day. Okay. That would be great. Well, do you have any questions for me now? All right. Thank you so much for your time. You have a good one. Thank you, too. Bye-bye.",
      publicFilePath:
        "https://dialpad.com/recording/admincallrecording/LqRwImoSuEdFIM3Qksuea4jr1SOxjLxBHTh3qeKSiXXP",
    },
    {
      createdAt: "2024-12-03 01:32:09.587101",
      createdBy: "3583e44194ac8e9f326563537c2566af",
      updatedAt: "2024-12-03 01:32:09.587101",
      updatedBy: "3583e44194ac8e9f326563537c2566af",
      id: 5,
      callId: "5473313347289088",
      email: "radilyn.ramirez@haulla.com",
      externalNumber: "+12149410141",
      startAt: "2024-12-02T23:58:22.413Z",
      currentProvider: "",
      dumpsterSize: "",
      serviceFrequency: "",
      dumpsterOption: "",
      followUpDate: "next year",
      contactName: "Dilshad",
      contactEmail: "diljahan67@gmail.com",
      contactPhone: "",
      sentiment: "neutral",
      actionItem: ["send email to diljahan67@gmail.com", "follow up next year"],
      summary:
        "The caller, Randalyn, was trying to reach Dilshad regarding trash pickup service. Dilshad was not available, but Hala confirmed that they had previously discussed the service and that Dilshad would need more time to consider it until next year.",
      text: "Yes, hi, good evening. This is Randalyn. I'm looking to speak with Dilshad, please. Is she available? Hold on a minute. Okay, thank you. Hello, good evening. This is Radeline. Am I speaking with Dilshad? No, she's not here right now. Who is this? Yeah, this is Radeline. I'm actually calling about the trash pickup service and I spoke with Dilshad probably on October. Is that Hala or something? Yeah, it is Hala. Oh, hi. Hi. Actually, yeah, I think, yeah, I did talk with somebody about, yeah. But still, you know, I'm so sorry, but I was kind of busy. stuff. I could not find any chance to check everything but I think I have to wait till at least next year I mean the one month left right oh I mean we also do you know if you have a contract we also take care of the contract. Like, we buy it out for you in case you are... Yeah, you already told me that. Yeah. Just give me some time, yeah, please. Okay, yeah, of course. I just wanted to confirm, is this the best number to reach you by any chance or do we have like yeah yeah actually you know nowadays I'm not staying all the time in one place so I'm just right mm-hmm but you receive this is the store number yeah yeah okay and then I wanted to confirm your email address is that thel that's me yeah yeah you can email me yeah yeah d-i-l-j-a-h-a-n-6-7 at gmail that's me that's perfect okay well i will definitely send you an email, so at least you can look at it. And then if you have questions, yeah, you can reach me there. Thank you so much. Yeah. Okay. Thank you so much, Dosa. You have a great day. You too. Bye-bye. Take care. Bye-bye.",
      publicFilePath:
        "https://dialpad.com/recording/admincallrecording/d2FNZGXWiiRtunv6N12oHElNAzYIDmvmV65QyEtjIKOm",
    },
    {
      createdAt: "2024-12-03 01:43:14.459509",
      createdBy: "15165066018b36a92560bccf079f6588",
      updatedAt: "2024-12-03 01:43:14.459509",
      updatedBy: "15165066018b36a92560bccf079f6588",
      id: 6,
      callId: "6558972648570880",
      email: "a.paragas@haulla.com",
      startAt: "2024-12-02T23:49:21.957Z",
      externalNumber: "+14693751416",
      currentProvider: "HALA",
      dumpsterSize: "unknown",
      serviceFrequency: "unknown",
      dumpsterOption: "unknown",
      followUpDate: "1 day",
      contactName: "Amy",
      contactEmail: "",
      contactPhone: "",
      sentiment: "negative",
      actionItem: [
        "Follow up with the driver for evidence regarding the missed pickup",
        "Ensure the dumpster is accessible and free from non-permissible trash for tomorrow's service",
        "Update Amy on the status of her credit dispute",
      ],
      summary:
        "The customer, Amy, expressed frustration over a denied credit for a missed garbage pickup. She claims that the driver did not provide evidence of non-permissible trash in her dumpster and that her service has been skipped multiple times without justification. The caller assured her that they would work on the dispute and ensure service for the next day.",
      text: "Hello? Hello? Oh, hi, Amy. Yes, this is Amy from HALA. How are you? How are you? I'm doing great. Thanks for asking. Actually, the reason I'm calling today is I wanted... The last time that I spoke with you, we've discussed about the garbage pick-up last November 26th, right? And I was actually working... I'm so sorry. I wasn't able to reply back. But I was working on 1126, a missed pickup credit. And that credit was denied. According to the driver, when they came to the location on 26th, they found that there are non-permissible trash inside your dumpster. There are woods inside from it. So that's the reason they denied the credit. Amy, I cannot accept it. Amy, I cannot accept the reason. Do they have any evidence that they stopped buying my property? And also, do they have evidence that I still have wood inside the dumpster? So basically, by that day when I report to you, it's already full by the cardboard. There's no space for me to dump any wood. I already remove it. You remove those woods before 26th, before your backup schedule? Yes. I was waiting because I called last, I mean, the week before. Let's say my schedule supposed to be the 26th, and I call either the 21st or 22nd. I spoke with the male representative, checking that are they coming back on the 26th to pay the cash. And then he confirmed that, yes, they came. They will come. And then I keep looking and wait for the whole day. And that's how I call you guys. We call that still no one show up on Tuesday, the 26th. And I wait until the 27th. Were you were told that the driver found out none or would before your pickup schedule day Tuesday? Correct. That's why I call on the 23rd or 22nd and say, it's already been removed. Okay. What is it doing here? I mean, your driver needs to give you some evidence before they stop by. But my work can't, did not catch any truck. Okay. Okay. work out I wanted to work on this dispute still of course I am here to help you out so I'll go ahead and ask proof from the driver if possible for me to ask for an inside camera or sensors inside your dumpster to check if there are still non-permissible trash inside from it, I will go ahead and do that for you. But please, while working on that, just be reminded to keep your dumpster accessible and free from any non-permissible trash for your pickup tomorrow, okay? I have been with this since the beginning of November. I talked to you, I talked to many representatives. Every week, you guys giving me the same answer that the driver stopped by my building, but my camera did not catch anybody even show up in my property. That's what really pissed me off. It's like they keep telling me, they say they stop by, but they never show up. And they keep telling you, oh, I still have the wood inside when I already removed it. So I basically wait three weeks, service free, for nothing, when they try to claim that I have some trash is not allowed in the dumpster. I waste my money and they skip my service. I totally understand where you're coming from. I make many calls. I talk to you. I talk to different representatives. I need to spend my time, keep reading my story, keep showing you the picture. But you guys coming back to tell me, oh, the driver show up, they stop by, they find the wood. Where is their evidence? Okay. Okay. I get your point. Of course. It's unfair for you to pay for something that was not provided and without any proof, right? Exactly. They just tried to come up with one reason for them to skip my location. And I catch it from the very beginning. The driver not even drive the truck inside my property in front of the dumpster he just opened my gate he walked into my dumpster and just take a picture and then he left that is the last I mean, the end of October, when they try not to take my service. Okay, they say, okay, I have something not allowed. Okay, I will move it. I keep talking to you, the other representatives. I try to take care of that. But for the three weeks, there's no take-up service. Yeah, I understand where you're coming from. Don't worry. I'm here to help you out. So I'll get back to you. I wanted to make sure that you will get the service tomorrow. I don't want this driver to find any reasons again to miss your trash tomorrow. Okay. I want you to get the service tomorrow while I'm still working on the credit dispute. Okay? Yes, please. Thank you so much for your remarkable patience. I'll get back to you as soon as I have all the updates with me. Okay? All right. Thank you. Thank you. Bye-bye. Good evening.",
      publicFilePath:
        "https://dialpad.com/recording/admincallrecording/jP0JbIcaglNIc5swchG8rDABY3XGMtmcZAucYY0rtvyl",
    },
    {
      createdAt: "2024-12-03 01:46:32.533060",
      createdBy: "17a40ba9152282c01bea01fb5de73f62",
      updatedAt: "2024-12-03 01:46:32.533060",
      updatedBy: "17a40ba9152282c01bea01fb5de73f62",
      id: 7,
      callId: "6213979803172864",
      email: "leslie.manite@haulla.com",
      startAt: "2024-12-02T23:30:25.791Z",
      externalNumber: "+14452041219",
      currentProvider: "",
      dumpsterSize: "",
      serviceFrequency: "",
      dumpsterOption: "",
      followUpDate: "30 minutes",
      contactName: "Ms. Tanya",
      contactEmail: "",
      contactPhone: "",
      sentiment: "positive",
      actionItem: [
        "Call back in 30 minutes to check if the document has been signed",
        "Send email confirmation of the service agreement",
      ],
      summary:
        "The call was about resending a service agreement for Ms. Tanya to sign. There was a minor issue with the checkbox for a promotion that needed to be corrected, but it was clarified that it was not urgent and could be signed at her convenience.",
      text: "virtual assisted living yes hi good evening is this hello yeah hello can you hear me yes i can hear you now yeah i'm actually reaching out to miss t, this is she. Peggy's on the other line, and I have another line going as well. Can I call you right back, Leslie? Yes, Ms. Tanya. I just want to let you know that I did resend the service agreement. I already sent it to the virtual assistant. Okay. This is living email for you to resign it, Ms. Sonia. Well, there was no mistake. There's no mistake with the information. The only thing that you need to resign the service agreement is the promotion. I forgot to check the checkbox for the 10 text message because as I sent the SMS or the text message of the quality analyst yes there was an extra 10% okay yes. Thank you. Probably in about 30 minutes or so. I'm just finishing payroll as well. Yes, it's okay. You can just resign it whenever you're available. It's not crushing up. Okay. Is it a document signed? Yes. It's just a service agreement because the BOA is already okay. And we are now processing the termination. Perfect. Okay. Sounds great. I'll sign now. Thank you. Thank you. Okay, have a good one. Bye-bye. You too. Bye-bye.",
      publicFilePath:
        " https://dialpad.com/recording/admincallrecording/xJvitvHF4z9flxyXrcqBnppzvOzoQA9H31H4qCGyDKe8",
    },
    {
      createdAt: "2024-12-03 03:18:40.203884",
      createdBy: "e694cb32fb9fe403c564e6718a727530",
      updatedAt: "2024-12-03 03:18:40.203884",
      updatedBy: "e694cb32fb9fe403c564e6718a727530",
      id: 18,
      callId: "6495629715914752",
      email: "d.barraza@haulla.com",
      startAt: "2024-12-02T23:06:03.811Z",
      externalNumber: "+16028855983",
      currentProvider: "",
      dumpsterSize: "2 yard",
      serviceFrequency: "once a week",
      dumpsterOption: "",
      followUpDate: "tomorrow",
      contactName: "Diana",
      contactEmail: "",
      contactPhone: "",
      sentiment: "neutral",
      actionItem: [
        "Send contract to Diana for review",
        "Follow up with Diana tomorrow",
      ],
      summary:
        "The customer, Diana, was quoted a rate of $86.67 for a 2-yard dumpster serviced once a week. She expressed satisfaction with the rate compared to other providers and is considering the offer. Diana will check other prices before making a decision and requested to be contacted directly for follow-up.",
      currentRate: "",
      quotedRate: "86.67",
      text: "Hola, buen día. Ya le tengo los precios, síguese. A ver, dígame. De dos euros una vez por semana estaría en 86 con 67 dólares. 86 dólares, 67 es lo que estaría pagando. Obviamente es un contrato de tres años, ¿no? El contrato pues sí tiene incremento anual, pero es el más bajo en el mercado. Digamos que otras empresas pues cobran... ¿Cuánto sería el incremento? Quiero saber el porcentaje porque luego después se empieza a subir, sube se alcanza uno. Mire, no tenemos como uno fijo que es lo que creo que ninguna empresa puede tener, llegar a tener, vaya, es conforme al mercado, pero sí es el más bajo en el mercado. Solo para el ejemplo, el año pasado incrementó entre un 6% nada más. O sea que es realmente nada comparado con otras empresas que incrementan entre un 8% y un 14% como Republic Services, Waste Management, Waste Connections, ¿no? El contrato es tres años con otra renovación y se le está entregando a las dos semanas, es en lo que se procesa, básicamente. ¿Y el contrato hay que renovarse? ¿Tengo que llevar ya marca después de tres años para renovarlo o automático? No, es automático. Entonces, si yo quisiera no renovar, ¿tendría que llamar antes de que se vence o qué? En el primer año regularmente es cuando se le comenta a Customer Service de que sabes que no quiere autorrenovar el contrato y entonces ya ahí es cuando se le aplica, ¿no? La no autorrenovación, básicamente. ¿Cuánto tiempo después? Perdón, ¿cuánto tiempo antes de los tres años tengo que llamar para decir no ya no lo quiero lo que sea pues regularmente lo que yo les recomiendo es que al primer año se le diga ¿sabes qué? o sea al primer año porque ahí es cuando ya sabes realmente si te gustó o no el servicio entonces ya de ahí ya decides sabes que no si le continúo entonces lo dejo así como va ¿no? entonces sería pensarían dos años todavía de espera por el contrato ¿no? si yo les llamo un mes o dos meses antes de que se vence el contrato, no aplica así. Pues regularmente son 30 días, pero yo siempre les recomiendo que por seguridad más que nada, pues, habitar desde el primer año, pues, es algo que sí podría, que podría ayudar los más para hacer aplicable esa parte. ¿Cuántas veces que se aplica? Si les va a hablar uno y le dice, no, pues ya en el primer año ya luego le van a empezar a incrementar más y luego ya saben que no va, que no se va a renovar. Más bien, yo no creo eso, porque regularmente lo que hace la empresa es preguntar a los clientes si hay algo que no les esté gustando del servicio, ¿para qué? Pues para mejorarlo, ¿no? Es regularmente lo que se hace. No sé otras empresas cómo funcionan realmente en ese aspecto, pero lo que se hace en esta empresa es así. Ok, entonces serían dos yardas recogiendo cada ocho días. Ahora, cuatro yardas recogiendo cada quince, ¿no tienes precio para eso? No tengo, pero tengo para una semana. Son 122.14. O sea que no tienes recogido. Recogiendo cada 15 tiene que ser cada 8 días. Así es, ajá, así es, ajá. Es correcto. ¿Y cómo es que se hace un contrato? Se lo envía al correo electrónico. Usted lo lee. En caso de que ya esté listo, pues ya nada más me da la firma. Una vez que se firma, yo lo subo a Customer Service. Customer Service empieza con el proceso de la entrega. Se le envía una welcome letter, que es básicamente con las instrucciones del autopago. O sea, ahorita, si usted me lo firmó, yo le aplicaría parte de los 86.67, le aplico los 70 de crédito en caso de que le interese el autopago. Si dice sí al autopago, van a ser 70 dólares Sí, sí. Ok, eso que no es autopago. ¿Cuánto es lo que hay que pagar cada mes nomás para estar seguro? 86,67. Menos los 5 dólares del autopago a partir del tercer mes serían 81,67. Sí, bueno, eso sí, no es autopago. 86,67. eso sería por el de dos yardas nada más, ¿verdad? Así es, por el de dos yardas. Realmente le voy a decir que está súper bien porque regularmente me dan 100 dólares y ahorita me están dando 86 con 67 y me quedé guau. Ok, entonces déjame, yo le voy a marcar, ¿por quién pregunto cuando yo marque este número? ¿Cómo le hago para comunicarme con usted? Don Diana, ¿gusta que le envíe el contrato nomás para que lo vaya checando? de cualquier manera es sin compromiso voy a comparar precios porque es la primera persona que llamo y la nueva era para precios pero si usted es el mejor pues ahí ya entonces si le digo que me lo mande ya ya lo firmamos. Ah, ok. Bueno, me parece muy bien. La otra pregunta era, de cuatro yardas recogiendo cada semana, ¿cuánto me dijo que era? 122.14. 122.14, ok. Ok, déjame, déj denme de qué mañana dar otra buscadita y si no, entonces ahí lo voy a, ah, pero, ¿me van a comunicar con ustedes directo o sí? Este, el número que le estoy hablando es mi número, ajá, igual aquí me puede contactar, me manda un mensajito o me marque y ya yo le contesto y le explico. Ajá. Ah, Diana. Diana. Diana. Ok. Ok. Muchas gracias. Gracias, buen día. Bye bye.",
      publicFilePath:
        "https://dialpad.com/recording/admincallrecording/HjNwi2JQ0Bb1znr4fRTlrcxZU1yKBmbtOsY9DJPhYFgE",
    },
    {
      createdAt: "2024-12-03 03:28:36.344966",
      createdBy: "44a67937d50623a8071e9d48ad78b240",
      updatedAt: "2024-12-03 03:28:36.344966",
      updatedBy: "44a67937d50623a8071e9d48ad78b240",
      id: 23,
      callId: "6737533548314624",
      email: "roberick.tamondong@haulla.com",
      startAt: "2024-12-02T22:54:58.545Z",
      externalNumber: "+12107772698",
      currentProvider: "Tiger",
      dumpsterSize: "",
      serviceFrequency: "",
      dumpsterOption: "",
      followUpDate: "",
      contactName: "Alex",
      contactEmail: "paradise-carwash@hotmail.com",
      contactPhone: "",
      sentiment: "positive",
      actionItem: ["Send invoice to Alex", "Follow up on the bill reduction"],
      summary:
        "The call was a follow-up regarding an email confirmation for Paradise Total Auto Care. Ross confirmed the correct email address for sending an invoice and discussed a reduction in the bill from Tiger from $120 to $90. Alex acknowledged the information and agreed to check on it.",
      currentRate: "$120",
      quotedRate: "$90",
      text: "Welcome to Paradise Car Wash andetailco.com an option from our menu. Press 1 to schedule an appointment or for service information. Press 2 for make ready our corporate accounts. Press 3 for human resources or employee center. Press 4 for corporate, make ready our commercial account payments or invoices request. Press 5 to leave a voicemail. hello yes hello good afternoon yep can you hear me okay yeah this is This is Ross again, by the way, from the Trash Pickup Holler. I spoke with you this morning. Is this Alex? Yes, I have a review email yet. Oh, yeah, Alex. I guess I just need to ask if the correct email is the right one. Can you spell again the email address? paradise-carwash at h At hotmail.com. Oh, hotmail. Hotmail. Can you check and confirm if this is the right email? Because I'm going to send it now yeah I'm just going to send it straight. This is for Paradise Total Auto Care. No. Paradise-CarWash at hotmail.com no this is the name of your business right yes okay okay there you go I just sent the email then you can just email. There you go. Yeah, I got it. There you go. Yep, just attach the invoice, and then we'll help you with your bill from Tiger. You said it's $120, so we can cut that down to $90 instead. Okay, Let me check on that. I'll let you know, okay? Yeah, cool. Thank you, Alex. You have a good one. Thank you. Okay. Okay. Okay. No s� si esto podr�a haberlo...",
      publicFilePath:
        "https://dialpad.com/recording/admincallrecording/GBn5ORQnJFG8cx2HkChOcmCcWq0oejTYxPhos0kIsXh4",
    },
  ];

  return (
    <div className="p-6 max-w-6xl mx-auto">
      <h1 className="text-2xl font-bold mb-6">콜 로그 대시보드</h1>

      <div className="grid gap-6">
        {callLogs.map((log) => (
          <CallLog key={log.callId} log={log} />
        ))}
      </div>
    </div>
  );
};

export default CallLogDashboard;

const CallLog = ({
  log,
}: {
  log: {
    id: number;
    externalNumber: string;
    startAt: string;
    followUpDate?: string;
    currentProvider?: string;
    dumpsterSize?: string;
    serviceFrequency?: string;
    currentRate?: string;
    quotedRate?: string;
    contactName?: string;
    contactEmail?: string;
    contactPhone?: string;
    sentiment?: string;
    summary: string;
    actionItem: string[];
    callId: string;
    text: string;
    publicFilePath: string;
  };
}) => {
  const [tap, setTap] = React.useState<"recap" | "audio">("recap");
  const formatDate = (dateString: string) => {
    const date = new Date(dateString);
    return date.toLocaleString();
  };
  return (
    <div
      key={log.id}
      className="w-full border p-4 rounded-lg border-black shadow-md"
    >
      <div className="pb-2">
        <div className="flex gap-2 items-center mb-2">
          <Headset className="h-6 w-6" />
          <span className="text-[24px]">
            {log.externalNumber
              ?.replace("+1", "")
              .replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3")}
          </span>
        </div>
        <div className="flex items-center gap-2 text-gray-600">
          <Clock className="h-5 w-5" />
          <span>{formatDate(log.startAt)}</span>
        </div>
        <div className="flex justify-between my-4">
          <button
            onClick={() => setTap("recap")}
            className={`w-1/2 px-3 py-1 transition-colors border-b-4  ${
              tap === "recap"
                ? "border-black"
                : "text-gray-500 hover:bg-gray-50"
            }`}
          >
            Recap
          </button>
          <button
            onClick={() => setTap("audio")}
            className={`w-1/2 px-3 py-1 transition-colors border-b-4  ${
              tap === "audio"
                ? "border-black"
                : "text-gray-500 hover:bg-gray-50"
            }`}
          >
            Audio
          </button>
        </div>
      </div>
      <div className="w-full">
        {tap === "recap" ? (
          <div className="grid grid-cols-1 gap-4">
            <div className="space-y-2">
              <div className="flex gap-2">
                <AlarmClockCheck className="h-5 w-5" />
                <span className="font-semibold">Follow-up call:</span>
                <div className="flex items-center gap-2 rounded bg-black text-white px-2">
                  {log.followUpDate || "Not set"}
                </div>
              </div>
            </div>
            <div className="space-y-2">
              {log.currentProvider ||
              log.dumpsterSize ||
              log.serviceFrequency ? (
                <div className="flex gap-2 font-semibold">
                  <Trash2 className="h-5 w-5" />
                  <p>Service Information</p>
                </div>
              ) : null}
              {log.currentProvider && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Provider:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.currentProvider}
                  </span>
                </div>
              )}
              {log.dumpsterSize && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Size:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.dumpsterSize}
                  </span>
                </div>
              )}
              {log.serviceFrequency && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Frequency:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.serviceFrequency}
                  </span>
                </div>
              )}
              {!!log.currentRate && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Current Rate:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.currentRate}
                  </span>
                </div>
              )}
              {!!log.quotedRate && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Quoted Rate:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.quotedRate}
                  </span>
                </div>
              )}
            </div>
            <div className="space-y-2">
              <div className="flex gap-2 font-semibold">
                <User className="h-5 w-5" />
                <p>Contact Information</p>
              </div>
              {log.contactName && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Name:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.contactName}
                  </span>
                </div>
              )}
              {log.contactEmail && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Email:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.contactEmail}
                  </span>
                </div>
              )}
              {log.contactPhone && (
                <div className="text-gray-600 pl-8">
                  <span className="font-medium mr-2">Phone:</span>
                  <span className="bg-gray-200 text-black px-2 rounded py-1">
                    {log.contactPhone}
                  </span>
                </div>
              )}
            </div>
            <div className="space-y-2">
              {log.sentiment && (
                <div className="flex gap-2">
                  <Heart className="h-5 w-5" />
                  <p className="font-semibold">Customer Sentiment</p>
                  <span
                    className={`px-2 rounded ${
                      log.sentiment === "positive"
                        ? "bg-blue-500 text-white"
                        : log.sentiment === "negative"
                        ? "bg-yellow-500 text-black"
                        : "bg-gray-200 text-black"
                    }`}
                  >
                    {log.sentiment}
                  </span>
                </div>
              )}
              {log.summary && (
                <>
                  <div className="flex gap-2 pt-3">
                    <AudioLines className="h-5 w-5" />
                    <span className="font-semibold">Summary</span>
                  </div>
                  <p className="pl-8">{log.summary}</p>
                </>
              )}
              <div className="flex gap-2 font-semibold pt-3">
                <ListChecks className="h-5 w-5" />
                <span>Action Item</span>
              </div>
              <ul className="pl-8 mt-1 text-[16px]">
                {log.actionItem.map((item, index) => (
                  <div key={index} className="flex items-baseline">
                    <span className="inline-flex items-center justify-center w-8 h-8 text-sm font-semibold flex-shrink-0">
                      {index + 1}
                    </span>
                    <p className="ml-2">{item}</p>
                  </div>
                ))}
              </ul>
            </div>
            <span className="text-sm text-gray-500 text-right md:text-left">
              Call ID: {log.callId}
            </span>
          </div>
        ) : (
          <div className="flex flex-col items-center gap-2 w-full">
            <AudioPlayer url={log.publicFilePath} />
            <div>
              {log.text.split(/(?<=[.!?])\s+/).map((sentence, index) => (
                <div key={index} className="flex items-baseline gap-3 mb-2">
                  <span className="inline-flex items-center justify-center w-8 h-8 text-blue-600 text-sm font-medium flex-shrink-0">
                    {index + 1}
                  </span>
                  <p className="text-gray-700">{sentence.trim()}</p>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
};
